!function(a,b){"function"==typeof define&&define.amd?define(["angular"],function(c){return a.angularGettextModule=b(c)}):"object"==typeof exports?module.exports=b(require("angular")):a.angularGettextModule=b(angular)}(this,function(a){var b="gettext";return a.module(b,[]),a.module(b).constant("gettext",function(a){return a}),a.module("gettext").factory("gettextCatalog",["gettextPlurals","gettextFallbackLanguage","$http","$cacheFactory","$interpolate","$rootScope",function(b,c,d,e,f,g){function h(){g.$broadcast("gettextLanguageChanged")}var i,j="$$noContext",k='<span id="test" title="test" class="tested">test</span>',l=a.element("<span>"+k+"</span>").html()!==k,m=function(a){return i.debug&&i.currentLanguage!==i.baseLanguage?i.debugPrefix+a:a},n=function(a){return i.showTranslatedMarkers?i.translatedMarkerPrefix+a+i.translatedMarkerSuffix:a};return i={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:e("strings"),setCurrentLanguage:function(a){this.currentLanguage=a,h()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(b,c){this.strings[b]||(this.strings[b]={});for(var d in c){var e=c[d];if(l&&(d=a.element("<span>"+d+"</span>").html()),a.isString(e)||a.isArray(e)){var f={};f[j]=e,e=f}for(var g in e){var i=e[g];e[g]=a.isArray(i)?i:[i]}this.strings[b][d]=e}h()},getStringFormFor:function(a,c,d,e){if(!a)return null;var f=this.strings[a]||{},g=f[c]||{},h=g[e||j]||[];return h[b(a,d)]},getString:function(a,b,d){var e=c(this.currentLanguage);return a=this.getStringFormFor(this.currentLanguage,a,1,d)||this.getStringFormFor(e,a,1,d)||m(a),a=b?f(a)(b):a,n(a)},getPlural:function(a,b,d,e,g){var h=c(this.currentLanguage);return b=this.getStringFormFor(this.currentLanguage,b,a,g)||this.getStringFormFor(h,b,a,g)||m(1===a?b:d),e&&(e.$count=a,b=f(b)(e)),n(b)},loadRemote:function(a){return d({method:"GET",url:a,cache:i.cache}).then(function(a){var b=a.data;for(var c in b)i.setStrings(c,b[c]);return a})}}}]),a.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window","gettextUtil",function(b,c,d,e,f,g){function h(a){return g.lcFirst(a.replace(k,""))}function i(b,c,d){var e=Object.keys(c).filter(function(a){return g.startsWith(a,k)&&a!==k});if(!e.length)return null;var f=a.extend({},b),i=[];return e.forEach(function(a){var e=b.$watch(c[a],function(b){var c=h(a);f[c]=b,d(f)});i.push(e)}),b.$on("$destroy",function(){i.forEach(function(a){a()})}),f}var j=parseInt((/msie (\d+)/.exec(a.lowercase(f.navigator.userAgent))||[])[1],10),k="translateParams";return{restrict:"AE",terminal:!0,compile:function(f,h){g.assert(!h.translatePlural||h.translateN,"translate-n","translate-plural"),g.assert(!h.translateN||h.translatePlural,"translate-plural","translate-n");var k=g.trim(f.html()),l=h.translatePlural,m=h.translateContext;return j<=8&&"<!--IE fix-->"===k.slice(-13)&&(k=k.slice(0,-13)),{post:function(f,h,j){function n(c){c=c||null;var i;l?(f=p||(p=f.$new()),f.$count=o(f),i=b.getPlural(f.$count,k,l,c,m)):i=b.getString(k,c,m);var j=h.contents();if(0!==j.length){if(i===g.trim(j.html()))return void(q&&e(j)(f));var n=a.element("<span>"+i+"</span>");e(n.contents())(f);var r=n.contents();d.enter(r,h),d.leave(j)}}var o=c(j.translateN),p=null,q=!0;j.translateN&&f.$watch(j.translateN,function(){n()}),f.$on("gettextLanguageChanged",function(){n()});var r=i(f,j,n);n(r),q=!1}}}}}]),a.module("gettext").factory("gettextFallbackLanguage",function(){var a={},b=/([^_]+)_[^_]+$/;return function(c){if(a[c])return a[c];var d=b.exec(c);return d?(a[c]=d[1],d[1]):null}}),a.module("gettext").filter("translate",["gettextCatalog",function(a){function b(b,c){return a.getString(b,null,c)}return b.$stateful=!0,b}]),a.module("gettext").factory("gettextPlurals",function(){function a(a){return b[a]||(b[a]=a.split("_").shift()),b[a]}var b={pt_BR:"pt_BR"};return function(b,c){switch(a(b)){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return c%10!=1||c%100==11?1:0;case"jv":return 0!=c?1:0;case"mk":return 1==c||c%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return c>1?1:0;case"lv":return c%10==1&&c%100!=11?0:0!=c?1:2;case"lt":return c%10==1&&c%100!=11?0:c%10>=2&&(c%100<10||c%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return c%10==1&&c%100!=11?0:c%10>=2&&c%10<=4&&(c%100<10||c%100>=20)?1:2;case"mnk":return 0==c?0:1==c?1:2;case"ro":return 1==c?0:0==c||c%100>0&&c%100<20?1:2;case"pl":return 1==c?0:c%10>=2&&c%10<=4&&(c%100<10||c%100>=20)?1:2;case"cs":case"sk":return 1==c?0:c>=2&&c<=4?1:2;case"sl":return c%100==1?1:c%100==2?2:c%100==3||c%100==4?3:0;case"mt":return 1==c?0:0==c||c%100>1&&c%100<11?1:c%100>10&&c%100<20?2:3;case"gd":return 1==c||11==c?0:2==c||12==c?1:c>2&&c<20?2:3;case"cy":return 1==c?0:2==c?1:8!=c&&11!=c?2:3;case"kw":return 1==c?0:2==c?1:3==c?2:3;case"ga":return 1==c?0:2==c?1:c<7?2:c<11?3:4;case"ar":return 0==c?0:1==c?1:2==c?2:c%100>=3&&c%100<=10?3:c%100>=11?4:5;default:return 1!=c?1:0}}}),a.module("gettext").factory("gettextUtil",function(){function a(a,b,c){if(!a)throw new Error("You should add a "+b+" attribute whenever you add a "+c+" attribute.")}function b(a,b){return 0===a.indexOf(b)}function c(a){var b=a.charAt(0).toLowerCase();return b+a.substr(1)}var d=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s*/,"").replace(/\s*$/,""):a}}();return{trim:d,assert:a,startsWith:b,lcFirst:c}}),b});